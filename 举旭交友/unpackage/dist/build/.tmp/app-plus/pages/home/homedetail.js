(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/homedetail"],{"1c05":function(e,t,i){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("a34a")),a=s(i("62d2"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,o,n,a,s){try{var r=e[a](s),l=r.value}catch(c){return void i(c)}r.done?t(l):Promise.resolve(l).then(o,n)}function l(e){return function(){var t=this,i=arguments;return new Promise(function(o,n){var a=e.apply(t,i);function s(e){r(a,o,n,s,l,"next",e)}function l(e){r(a,o,n,s,l,"throw",e)}s(void 0)})}}var c="http://www.daichen.club",u="举旭交友，交友神器",h="交友、活动、发布功能全覆盖",d="http://www.daichen.club/upload/image/logo.jpg",f=plus.screen.resolutionWidth,p=25,g=55,m=5,v=12,w=p/360*f,b=(f-2*w-4*g)/3;b<=5&&(p=15,g=40,w=p/360*f,b=(f-2*w-4*g)/3);var x=w+g+b,y=w+2*(g+b),k=w+3*(g+b),j=w,S=j+g+m+v+w,J=new plus.nativeObj.View("nvMask",{top:"0px",left:"0px",height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0.2)"});J.addEventListener("click",function(){J.hide(),T.hide()});var T=new plus.nativeObj.View("nvImageMenu",{bottom:"0px",left:"0px",height:"264px",width:"100%",backgroundColor:"rgb(255,255,255)"});T.draw([{tag:"rect",color:"#e7e7e7",position:{top:"0px",height:"1px"}},{tag:"font",id:"sharecancel",text:"取消分享",textStyles:{size:"14px"},position:{bottom:"0px",height:"44px"}},{tag:"rect",color:"#e7e7e7",position:{bottom:"45px",height:"1px"}},{tag:"img",id:"imgwechatfriend",src:"/static/sharemenu/wechatfriend.png",position:{top:j,left:w,width:g,height:g}},{tag:"font",id:"fontwechatfriend",text:"微信好友",textStyles:{size:v},position:{top:j+g+m,left:w,width:g,height:v}},{tag:"img",id:"imgwechatmoments",src:"/static/sharemenu/wechatmoments.png",position:{top:j,left:x,width:g,height:g}},{tag:"font",id:"fontwechatmoments",text:"微信朋友圈",textStyles:{size:v},position:{top:j+g+m,left:x-2.5,width:g+5,height:v}},{tag:"img",id:"imgweibo",src:"/static/sharemenu/weibo.png",position:{top:j,left:y,width:g,height:g}},{tag:"font",id:"fontweibo",text:"微博",textStyles:{size:v},position:{top:j+g+m,left:y,width:g,height:v}},{tag:"img",id:"imgqq",src:"/static/sharemenu/qq.png",position:{top:j,left:k,width:g,height:g}},{tag:"font",id:"fontqq",text:"QQ",textStyles:{size:v},position:{top:j+g+m,left:k,width:g,height:v}},{tag:"img",id:"imgcopyurl",src:"/static/sharemenu/copyurl.png",position:{top:S,left:w,width:g,height:g}},{tag:"font",id:"fontcopyurl",text:"复制",textStyles:{size:v},position:{top:S+g+m,left:w,width:g,height:v}},{tag:"img",id:"imgmore",src:"/static/sharemenu/more.png",position:{top:S,left:x,width:g,height:g}},{tag:"font",id:"fontmore",text:"更多",textStyles:{size:v},position:{top:S+g+m,left:x,width:g,height:v}}]),T.addEventListener("click",function(t){if(t.screenY>plus.screen.resolutionHeight-44)J.hide(),T.hide();else if(t.clientX<5||t.clientX>f-5||t.clientY<5);else{var i=-1,n=t.clientY<S-w/2?0:1,a=-1;if(a=t.clientX<x-b/2?0:t.clientX<y-b/2?1:t.clientX<k-b/2?2:3,i=0==n?a:a+4,console.log(e("点击按钮的序号: "+i," at pages/home/homedetail.vue:461")),i>=0&&i<=5){var s="",r="";switch(i){case 0:s="weixin",r="WXSceneSession";break;case 1:s="weixin",r="WXSenceTimeline";break;case 2:s="sinaweibo";break;case 3:s="qq";break;case 4:o.setClipboardData({data:c,complete:function(){o.showToast({title:"已复制到剪贴板"})}});break;case 5:plus.share.sendWithSystem({content:c});break}""!=s&&o.share({provider:s,scene:r,type:0,href:c,title:u,summary:h,imageUrl:d,success:function(t){console.log(e("success:"+JSON.stringify(t)," at pages/home/homedetail.vue:505"))},fail:function(t){console.log(e("fail:"+JSON.stringify(t)," at pages/home/homedetail.vue:508"))}})}}});var O={data:function(){return{baseurl:"",paystate:0,isShow:!1,nav2Show:!1,detail:{},jxuser:{},isJoin:!1,joinlist:[],orderInfo:null,providerList:[],id:""}},onBackPress:function(){if(T.isVisible())return T.hide(),J.hide(),!0},onLoad:function(){var t=l(n.default.mark(function t(i){var o,s,r,l,c,u,h,d;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.getProvid(),console.log(e(i," at pages/home/homedetail.vue:555")),this.baseurl=this.global.baseUrl,o=i.id||46,t.next=6,a.default.generalGET(this.global.baseUrl+"selectJxActDetail?jxactid="+o);case 6:if(s=t.sent,console.log(e(s," at pages/home/homedetail.vue:561")),r=s.data.mystate,"exist"==r&&(this.isJoin=!0),l=s.data.JxAct,l.baomingstartime=this.GetTime(l.baomingstartime),l.baomingendtime=this.GetTime(l.baomingendtime),l.pic1=JSON.parse(l.pic1),this.detail=l,c=s.data.jxuser,this.jxuser=c,u=s.data.JxActParticipate,null!=this.userinfo?this.userinfo.phone:"",h=u.length,h>0)for(this.joinlist=u,d=0;d<h;d++)u[d].jxmember||(u[d].jxmember={}),u[d].jxmember.touxiang||(u[d].jxmember.touxiang="upload/touxiang.jpg");case 21:case"end":return t.stop()}},t,this)}));function i(e){return t.apply(this,arguments)}return i}(),methods:{complainFn:function(){o.navigateTo({url:"complain"})},handleShare:function(){J.show(),T.show()},getProvid:function(){var t=this;console.log(e("获取支付通道1"," at pages/home/homedetail.vue:606")),console.log(e("获取支付通道2"," at pages/home/homedetail.vue:608")),o.getProvider({service:"payment",success:function(i){console.log(e("payment success:"+JSON.stringify(i)," at pages/home/homedetail.vue:612"));var o=[];i.provider.map(function(e){switch(e){case"alipay":o.push({name:"支付宝",id:e,loading:!1});break;case"wxpay":o.push({name:"微信",id:e,loading:!1});break;default:break}}),t.providerList=o},fail:function(t){console.log(e("获取支付通道失败：",t," at pages/home/homedetail.vue:637"))}})},getOrder:function(){var t=l(n.default.mark(function t(i){var o;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isShow=!0,!this.token){t.next=9;break}return t.next=4,a.default.generalGET(this.global.baseUrl+"unifiedOrder",{id:i,beizhu:1},{token:this.token});case 4:o=t.sent,console.log(e(o," at pages/home/homedetail.vue:655")),"OK"==o.data.code&&(this.orderInfo=o.data,console.log(e(this.orderInfo," at pages/home/homedetail.vue:658")),this.id=i),t.next=10;break;case 9:this.jumpToLogin();case 10:case"end":return t.stop()}},t,this)}));function i(e){return t.apply(this,arguments)}return i}(),paynow:function(){var t=l(n.default.mark(function t(){var i,s=this;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e(1111," at pages/home/homedetail.vue:666")),this.providerList[0].loading=!0,!this.orderInfo){t.next=14;break}return console.log(e({out_trade_no:this.orderInfo.orderid,total_amount:this.orderInfo.baomingfei,subject:"Pay for JUXU"}," at pages/home/homedetail.vue:669")),t.next=6,a.default.generalGET(this.global.baseUrl+"AppPay",{out_trade_no:this.orderInfo.orderid,total_amount:this.orderInfo.baomingfei,subject:"Pay for DaiChen"},{token:this.token});case 6:if(i=t.sent,console.log(e("已经请求服务器，准备调起app支付"," at pages/home/homedetail.vue:683")),console.log(e(i," at pages/home/homedetail.vue:684")),200===i.statusCode){t.next=13;break}return console.log(e("获得订单信息失败",orderInfo," at pages/home/homedetail.vue:686")),o.showModal({content:"获得订单信息失败",showCancel:!1}),t.abrupt("return");case 13:o.requestPayment({provider:"alipay",orderInfo:i.data,success:function(t){console.log(e("支付成功",t," at pages/home/homedetail.vue:697")),o.showToast({title:"活动参与成功!"}),s.isJoin=!0},fail:function(t){console.log(e("fail",t," at pages/home/homedetail.vue:705")),o.showModal({content:"支付失败",showCancel:!1})},complete:function(){s.providerList[0].loading=!1}});case 14:case"end":return t.stop()}},t,this)}));function i(){return t.apply(this,arguments)}return i}(),getOrderInfo:function(t){var i="";i=plus.runtime.appid;var n="https://demo.dcloud.net.cn/payment/?payid="+t+"&appid="+i+"&total="+this.price;return new Promise(function(t){o.request({url:n,success:function(i){console.log(e("从服务器请求的"," at pages/home/homedetail.vue:727")),t(i)},fail:function(e){t(e)}})})},joinEdu:function(){var t=l(n.default.mark(function t(i){var s;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e(this.token," at pages/home/homedetail.vue:738")),!this.token){t.next=9;break}return t.next=4,a.default.generalGET(this.global.baseUrl+"/canyujiaoyu",{id:i},{token:this.token});case 4:s=t.sent,console.log(e(s," at pages/home/homedetail.vue:747")),"OK"==s.data.code&&(this.isJoin=!0,o.showToast({title:"参与成功"}),console.log(e(this.userinfo," at pages/home/homedetail.vue:753")),this.joinlist.push({jxmember:this.userinfo})),t.next=10;break;case 9:o.showToast({title:"请登录后再参与"});case 10:case"end":return t.stop()}},t,this)}));function i(e){return t.apply(this,arguments)}return i}(),coverHide:function(){this.isShow=!1},navShowFn:function(){this.nav2Show=!0},navHideFn:function(){this.nav2Show=!1},handleJoinList:function(e){o.navigateTo({url:"joinlist?id="+e})}}};t.default=O}).call(this,i("0de9")["default"],i("6e42")["default"])},"27c5":function(e,t,i){"use strict";i.r(t);var o=i("1c05"),n=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);t["default"]=n.a},"3b8b":function(e,t,i){"use strict";var o=i("92d0"),n=i.n(o);n.a},4548:function(e,t,i){"use strict";i.r(t);var o=i("cfa8"),n=i("27c5");for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);i("3b8b");var s=i("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,null,null);t["default"]=r.exports},"92d0":function(e,t,i){},cfa8:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.paystate=0},e.e1=function(t){e.paystate=1},e.e2=function(t){e.paystate=2})},n=[];i.d(t,"a",function(){return o}),i.d(t,"b",function(){return n})}},[["66de","common/runtime","common/vendor"]]]);