(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"5cbf":function(e,o,t){"use strict";t.r(o);var n=t("7866"),r=t("f069");for(var a in r)"default"!==a&&function(e){t.d(o,e,function(){return r[e]})}(a);t("9f5a");var i=t("2877"),s=Object(i["a"])(r["default"],n["a"],n["b"],!1,null,null,null);o["default"]=s.exports},6238:function(e,o,t){},7866:function(e,o,t){"use strict";var n=function(){var e=this,o=e.$createElement;e._self._c},r=[];t.d(o,"a",function(){return n}),t.d(o,"b",function(){return r})},"9f5a":function(e,o,t){"use strict";var n=t("6238"),r=t.n(n);r.a},a968:function(e,o,t){"use strict";(function(e,n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=s(t("a34a")),a=(s(t("ad5e")),s(t("62d2"))),i=s(t("66fd"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,o,t,n,r,a,i){try{var s=e[a](i),u=s.value}catch(c){return void t(c)}s.done?o(u):Promise.resolve(u).then(n,r)}function c(e){return function(){var o=this,t=arguments;return new Promise(function(n,r){var a=e.apply(o,t);function i(e){u(a,n,r,i,s,"next",e)}function s(e){u(a,n,r,i,s,"throw",e)}i(void 0)})}}var d={data:function(){return{phoneNumber:"13983171812",passwd:"",code:"",rCode:"",isShowOauth:!0,showProvider:{weixin:!1,qq:!1,sinaweibo:!1,xiaomi:!1}}},onShow:function(){},onLoad:function(){this.isShowOauth=!0,this.getProvider(),this.rCode=this.randomCode()},methods:{resetpasswd:function(){e.navigateTo({url:"resetpasswd"})},randomCode:function(){var e=Math.floor(25*Math.random())+65,o=Math.floor(25*Math.random())+65,t=Math.floor(25*Math.random())+65,r=Math.floor(25*Math.random())+65,a=this.cToL(e)+this.cToL(o)+this.cToL(t)+this.cToL(r);return console.log(n(e,o,t,r," at pages/login/login.vue:114")),a},cToL:function(e){return String.fromCharCode(e)+""},changeCode:function(){this.rCode=this.randomCode()},reg:function(){e.navigateTo({url:"register"})},oauthLogin:function(o){e.showLoading(),e.login({provider:o,success:function(t){console.log(n("success: "+JSON.stringify(t)," at pages/login/login.vue:134")),e.getUserInfo({provider:o,success:function(o){console.log(n("用户信息："+JSON.stringify(o.userInfo)," at pages/login/login.vue:139")),e.setStorage({key:"UserInfo",data:{username:o.userInfo.nickName,face:o.userInfo.avatarUrl,signature:"个性签名",integral:0,balance:0,envelope:0},success:function(){e.hideLoading(),e.showToast({title:"登录成功",icon:"success"}),setTimeout(function(){e.navigateBack()},300)}})}})},fail:function(e){console.log(n("fail: "+JSON.stringify(e)," at pages/login/login.vue:163"))}})},getProvider:function(){var o=this;e.getProvider({service:"oauth",success:function(e){for(var t=e.provider.length,n=0;n<t;n++)o.showProvider[e.provider[n]]=!0;0==e.provider.length&&(o.isShowOauth=!1)}})},toPage:function(o){e.hideKeyboard(),e.navigateTo({url:o})},doLogin:function(){var o=c(r.default.mark(function o(){var t,s;return r.default.wrap(function(o){while(1)switch(o.prev=o.next){case 0:if(e.hideKeyboard(),/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber)){o.next=4;break}return e.showToast({title:"请填写正确手机号码",icon:"none"}),o.abrupt("return",!1);case 4:if(this.code.toLowerCase()==this.rCode.toLowerCase()){o.next=7;break}return e.showToast({title:"验证码错误",icon:"none"}),o.abrupt("return",!1);case 7:if(""!=this.passwd){o.next=10;break}return e.showToast({title:"密码不能为空",icon:"none"}),o.abrupt("return",!1);case 10:return e.showLoading({title:"登录中..."}),o.next=13,a.default.generalGET(this.global.baseUrl+"doLogin",{phone:this.phoneNumber,pwd:this.passwd});case 13:t=o.sent,console.log(n(t," at pages/login/login.vue:214")),"OK"==t.data.code&&(t.data.userinfo.token=t.data.token,s=JSON.stringify(t.data.userinfo),console.log(n(s," at pages/login/login.vue:218")),e.setStorage({key:"userinfo",data:s}),i.default.prototype.userinfo=JSON.parse(s),i.default.prototype.token=t.data.token,e.redirectTo({url:"../home/home"})),"pwdErr"==t.data.code&&e.showToast({title:"密码错误",icon:"none"}),e.hideLoading();case 18:case"end":return o.stop()}},o,this)}));function t(){return o.apply(this,arguments)}return t}()}};o.default=d}).call(this,t("6e42")["default"],t("0de9")["default"])},f069:function(e,o,t){"use strict";t.r(o);var n=t("a968"),r=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(o,e,function(){return n[e]})}(a);o["default"]=r.a}},[["f41a","common/runtime","common/vendor"]]]);